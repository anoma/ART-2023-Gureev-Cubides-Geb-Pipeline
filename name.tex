\documentclass[final,singlepage,callpaper]{msc}
\input{preambule}
\usepackage{stackengine}
\parskip 1em
\begin{document}
\input{metadata}



% \begin{table}[!htb]
% \caption{Compilation cases to convert a \SeqN{} morphism to a valid \VampIR{}
% expression.}
\setlength{\tabcolsep}{1mm} % separator between columns
\def\arraystretch{1.25} % vertical stretch factor
% \centering
\begin{center}
\scalebox{0.85}{%
\begin{tabular}{p{4cm}p{4cm}p{4cm}p{4cm}}
\toprule \SeqN{}                  & Inputs      & Inductive Hypotheses          & Output                \\
\midrule \tcbox{id (a1,...,an)}   & \texttt{(x1,...,xn)}  & None &\texttt{(x1,...,xn)}  \\
\midrule \small\tcbox[tikznode]{
composition \\
(f : (b1,...,bm) S-> (c1,...,ck))\\
(g : (a1,...,an) S-> (b1,...,bm))}  & \texttt{(x1,...,xn)}  
& \small\tcbox[tikznode]{to-vampir (g) (x1,...,xn)\\ \;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\; = (g1,..,gm)}
& \small\tcbox[tikznode]{%
to-vampir (f)  (g1,...,gm)} \\
\midrule \small\tcbox[tikznode]{%
parallel-seq \\ (f : (a1,...,an) S-> (b1,...,bm)) \\ (g : (c1,...,ck) S-> (d1,...,di))} &      \texttt{x1,...,x(n+m)}  
& \stackanchor{\small\tcbox[tikznode]{to-vampir (f) (x1,...,xn)\\\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;  = (f1,....,fn) }}{\small\tcbox[tikznode]{to-vampir (g) (x(n+1),...,x(n+m))\\ \;\;\;\;\;\;  = (g1,....,gm)}}  
& 
\texttt{(f1,...,fn,g1,...,gm)}
\\
\midrule \small\tcbox[tikznode]{%
parallel-seq \\ (f : (a1,...,an) S-> (b1,...,bm)) \\ (g : (c1,...,ck) S-> (d1,...,di))} &     \texttt{x1,...,x(n+m)}  
& {\begin{aligned}
\small\tcbox[tikznode]{to-vampir (f) &(x1,...,xn)} \\
&=(f1,....,fn)\\
\small\tcbox[tikznode]{to-vampir (g) &(x(n+1),...,x(n+m))\\
&= (g1,....,gm)
\end{aligned}}  
& 
\texttt{(f1,...,fn,g1,...,gm)}
\\
\midrule
\small\tcbox[tikznode]{%
branch-seq \\
(f : (a1,...,an) S-> (b1,...,bm))\\
(g : (a1,...,an) S-> (b1,...,bm))} & \texttt{(x0,...,xn)} 
& \stackanchor{\small\tcbox[tikznode]{to-vampir (f) (x1,...,xn)\\\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\; = (f1,...,fm)}}{\small\tcbox[tikznode]{to-vampir(g)(x1,...,xn)\\ \;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;= (g1,...,gm)}}
&
\texttt{(((1-x0) * f1) + (x0 * g1), ...,((1-x0) * fm) + (x0 * gm) )}
\\
\midrule \small\tcbox{fork-seq (a1,...,an)}                     & \texttt{(x1,...,xn)}  & None      & \texttt{(x1,...,xn,x1,...,xn)}
\\
\midrule \small\tcbox{drop-nil (a1,...,an)}                     & 
\texttt{(x1,...,xn)}  & None      & \texttt{(0)}\\
\midrule \small\tcbox{remove-right (a1,...,an)}                 & \texttt{(x1,...,xn,x(n+1))} & None & \texttt{(x1,...,xn)}\\
\midrule \small\tcbox{remove-left (a1,...,an)}                  & 
\texttt{(x1,...,xn,x(n+1))} & None & \texttt{(x2,...,x(n+1))}
\\
\midrule \small\tcbox{inj-length-left (a1,...,an) (b1,...,bm)}  & \texttt{(x1,...,xn)}  & None & \texttt{(x1,...,xn,0,...,0)}
\end{tabular}
}
\end{center}
\vfill
\newpage
\begin{center}
\scalebox{0.85}{%
\begin{tabular}{p{4.5cm}p{3cm}p{1.6cm}p{5.8cm}}
\midrule \small\tcbox{inj-length-right (a1,...,an) (b1,...,bm)} &
\texttt{(x1,...,xm)}   & None    & \texttt{(0,...,0,x1,...,xm)}
\\
\midrule \small\tcbox{inj-size n m}                             & \texttt{(x1)}   & None             & \texttt{(x1)}\\
\midrule \small\tcbox{zero-bit}                                       & Any            & None             & \texttt{(0)}
\\
\midrule \small\tcbox{one-bit}                                        & Any        &None                 & \texttt{(1)}\\
\midrule
\small\tcbox{shift-front (a1,...,an) k} & \texttt{(x1,...,xn)} &  None &\texttt{(xk,x1,...,x(k-1),x(k+1),...,xn)}
\\
\midrule \small\tcbox{seqn-add n}        & \texttt{(x1,x2)} & None   & \texttt{(plus\_range n x1 x2)}\\
\midrule \small\tcbox{seqn-substract n}  & \texttt{(x1,x2)}    & None &\texttt{(minus-range n x1 x2)}\\
\midrule \small\tcbox{seqn-multiply n}   & \texttt{(x1,x2)} & None    & \texttt{(mult\_range n x1 x2)}\\
\midrule \small\tcbox{seqn-divide n}     & \texttt{(x1,x2)} & None    & \texttt{(x1 / x2)}\\
\midrule \small\tcbox{seqn-nat n m}      & Any              & None   & \texttt{(m)}\\
\midrule \small\tcbox{seqn-concat n m}   & \texttt{(x1,x2)} & None   & \texttt{((x1 * (2 \^ m)) + x2)}\\
\midrule \small\tcbox{seqn-decompose n}  & \texttt{(x1)}    & None   & \texttt{(n\_th (n - 1) (range\_n n x1), combine (drop\_ith (range n n x1)))}\\
\midrule \small\tcbox{seqn-eq n}         & \texttt{(x1,x2)} & None   & \texttt{(iszero (x1 - x2), 0)}\\
\midrule \small\tcbox{seqn-lt n}         & \texttt{(x1,x2)}  & None  & \texttt{(negative n (x1 - x2), 0)}
\end{tabular}
}
\end{center}




\end{document}
